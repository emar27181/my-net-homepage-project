---
/**
 * デコメ（動くGIF絵文字）コンポーネント
 * 2000年代アメブロ風の動く絵文字を表示
 */

interface Props {
  /** 絵文字の種類・カテゴリ */
  type: DekomeType;
  /** サイズ（small, medium, large） */
  size?: DekomeSize;
  /** カスタムクラス */
  class?: string;
  /** alt属性 */
  alt?: string;
  /** カスタムURL（typeを使わない場合） */
  customUrl?: string;
}

type DekomeType = 
  | 'heart-pink'        // ピンクハート
  | 'heart-rainbow'     // レインボーハート
  | 'star-twinkle'      // キラキラ星
  | 'star-shooting'     // 流れ星
  | 'flower-sakura'     // 桜
  | 'flower-cute'       // かわいい花
  | 'cat-wink'          // ウインク猫
  | 'cat-dance'         // 踊る猫
  | 'face-happy'        // 笑顔
  | 'face-love'         // 恋愛顔
  | 'sparkle-gold'      // 金のキラキラ
  | 'sparkle-rainbow'   // レインボーキラキラ
  | 'crown-princess'    // プリンセス王冠
  | 'butterfly'         // 蝶々
  | 'music-note'        // 音符
  | 'game-controller'   // ゲームコントローラー
  | 'computer'          // パソコン
  | 'coffee-steam';     // コーヒー湯気

type DekomeSize = 'xs' | 'sm' | 'md' | 'lg' | 'xl';

const { type, size = 'sm', class: className = '', alt, customUrl } = Astro.props;

// デコメURLマッピング（フリー素材・パブリックドメインのGIF）
const dekomeUrls: Record<DekomeType, string> = {
  'heart-pink': 'https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExcGluayBoZWFydCBhbmltYXRlZCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/3o7aCWJavAgtBzLWrS/giphy.gif',
  'heart-rainbow': 'https://media.giphy.com/media/26FLdmIp6wJr91JAI/giphy.gif',
  'star-twinkle': 'https://media.giphy.com/media/xT0xeOJkG6xlTaLkCQ/giphy.gif',
  'star-shooting': 'https://media.giphy.com/media/3oKIPqsXYcdjcBcXL2/giphy.gif',
  'flower-sakura': 'https://media.giphy.com/media/26FeVHrCvkr4IBSuI/giphy.gif',
  'flower-cute': 'https://media.giphy.com/media/l0HlHJGHe3yAMhdQY/giphy.gif',
  'cat-wink': 'https://media.giphy.com/media/3oKIPnOAw6LjOAQb5Tl/giphy.gif',
  'cat-dance': 'https://media.giphy.com/media/jpVuGo0JkAXJiuNNK7/giphy.gif',
  'face-happy': 'https://media.giphy.com/media/XD9o33QG9BoMis7iM4/giphy.gif',
  'face-love': 'https://media.giphy.com/media/3o6fJeOwJyONOOZOIg/giphy.gif',
  'sparkle-gold': 'https://media.giphy.com/media/l0Extsf1R5YuFXkpG/giphy.gif',
  'sparkle-rainbow': 'https://media.giphy.com/media/26BRBKqUiq586bRVm/giphy.gif',
  'crown-princess': 'https://media.giphy.com/media/l0HlwwRxfcVEr4AUg/giphy.gif',
  'butterfly': 'https://media.giphy.com/media/3o6fJgfvyvrPYwT4kw/giphy.gif',
  'music-note': 'https://media.giphy.com/media/3oKIP7CaDfNTeVVjCU/giphy.gif',
  'game-controller': 'https://media.giphy.com/media/26BRrTJdGaq8Eoz2M/giphy.gif',
  'computer': 'https://media.giphy.com/media/3o6fJnmhZ8lUXiDlG1/giphy.gif',
  'coffee-steam': 'https://media.giphy.com/media/3o6fJeAiIpk5EeoC8o/giphy.gif'
};

// サイズマッピング
const sizeClasses: Record<DekomeSize, string> = {
  'xs': 'w-3 h-3',      // 12px
  'sm': 'w-4 h-4',      // 16px  
  'md': 'w-5 h-5',      // 20px
  'lg': 'w-6 h-6',      // 24px
  'xl': 'w-8 h-8'       // 32px
};

// デフォルトalt文字列
const defaultAlts: Record<DekomeType, string> = {
  'heart-pink': 'ピンクハート',
  'heart-rainbow': 'レインボーハート',
  'star-twinkle': 'キラキラ星',
  'star-shooting': '流れ星',
  'flower-sakura': '桜',
  'flower-cute': 'かわいい花',
  'cat-wink': 'ウインク猫',
  'cat-dance': '踊る猫',
  'face-happy': '笑顔',
  'face-love': 'ラブリー',
  'sparkle-gold': '金キラキラ',
  'sparkle-rainbow': 'レインボーキラキラ',
  'crown-princess': 'プリンセス王冠',
  'butterfly': '蝶々',
  'music-note': '音符',
  'game-controller': 'ゲームコントローラー',
  'computer': 'パソコン',
  'coffee-steam': 'コーヒー'
};

const imageUrl = customUrl || dekomeUrls[type];
const imageAlt = alt || defaultAlts[type];
const sizeClass = sizeClasses[size];
const combinedClasses = `dekome inline align-middle ${sizeClass} ${className}`.trim();
---

<img 
  src={imageUrl} 
  alt={imageAlt}
  class={combinedClasses}
  loading="lazy"
  decoding="async"
/>